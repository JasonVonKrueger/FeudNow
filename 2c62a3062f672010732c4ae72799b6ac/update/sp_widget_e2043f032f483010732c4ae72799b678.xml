<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller=function($scope, spUtil) {
	/* widget controller */
	var c = this;

	// set initial scores
	switch (c.options.team) {
		case 0:
			c.team_score = 0;
			break;
		case 1:
			c.team_score = 0;
			break;
		case 2:
			c.team_score = 0;
			break;
	}


	// watch for changes to the game
	spUtil.recordWatch($scope, "x_159204_feudnow_game", "active=true", function(name) {
		if (name.data.operation == 'update') {

			// wrong answer
			if (name.data.changes[0] == 'wrong_answer_count') {
				var count = parseInt(name.data.record.wrong_answer_count.value);

				if (count) {
					if (count == 1) {
						$('#x1').show();
						$('#x2, #x3').hide();
					}

					if (count == 2) {
						$('#x1, #x2').show();
						$('#x3').hide();
					}

					if (count == 3) {
						$('#x1, #x2, #x3').show();

						// show the big green buttons for host
						$('.big-button.green').css('visibility', 'visible');
					}			

					$('.big-x-container').show().delay(1000).fadeOut();					
				}


			}						

			// update the scores
			if (name.data.record.current_answer_index.value) {
				if (c.options.team == 0)
					c.team_score = name.data.record.round_score.value;			
			}			

			c.server.refresh();
		}	

	});




};]]></client_script>
        <controller_as>c</controller_as>
        <css>.scorebox {
  width: 100%;
  height: 100%;
}

.scorebox-header {
	text-align: center; 
  font-size: 2.5em;
}

.scorebox-score {
	text-align: center; 
  font-size: 2.5em;
}</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>fn-scorebox</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {  }]]></link>
        <name>fn-scorebox</name>
        <option_schema>[{"name":"title","section":"other","label":"Title","type":"string"},{"name":"team","section":"other","label":"Team","type":"integer"}]</option_schema>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {  /* populate the 'data' object */  /* e.g., data.table = $sp.getValue('table'); */})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>rpoore_admin</sys_created_by>
        <sys_created_on>2021-05-16 00:59:55</sys_created_on>
        <sys_id>e2043f032f483010732c4ae72799b678</sys_id>
        <sys_mod_count>28</sys_mod_count>
        <sys_name>fn-scorebox</sys_name>
        <sys_package display_value="FeudNow" source="x_159204_feudnow">2c62a3062f672010732c4ae72799b6ac</sys_package>
        <sys_policy/>
        <sys_scope display_value="FeudNow">2c62a3062f672010732c4ae72799b6ac</sys_scope>
        <sys_update_name>sp_widget_e2043f032f483010732c4ae72799b678</sys_update_name>
        <sys_updated_by>rpoore_admin</sys_updated_by>
        <sys_updated_on>2021-05-17 02:56:11</sys_updated_on>
        <template><![CDATA[<div>
  <div class="scorebox">
    <div class="scorebox-header">
		{{c.options.title}}
    </div>
    
    <div class="scorebox-score">
      {{c.team_score}}
    </div>
    
  </div>
</div>]]></template>
    </sp_widget>
</record_update>
