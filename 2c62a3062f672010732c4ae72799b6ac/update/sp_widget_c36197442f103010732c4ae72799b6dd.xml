<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller=function() {
  /* widget controller */
  var c = this;

	if (c.options.team == 1) {
		c.team_players = c.data.team_one_players;
	}
	
	if (c.options.team == 2) {
		c.team_players = c.data.team_two_players;
	}
	
	//c.team_two_players = c.data.team_two_players;
	
};]]></client_script>
        <controller_as>c</controller_as>
        <css>.players {
  font-size: 1.7em;
	text-align: center; 
}

#image {
	background: url('avatar-sheet-2.jpg');
  background-repeat: no-repeat;
	background-position: -24px -24px;
	width: 125px;
	height: 120px;  


}</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>true</has_preview>
        <id>fn-playerlist</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {  }]]></link>
        <name>fn-playerlist</name>
        <option_schema>[{"name":"team","section":"other","label":"Team","type":"integer"}]</option_schema>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
  /* populate the 'data' object */
  /* e.g., data.table = $sp.getValue('table'); */
	
	//var game_id = $sp.getParameter('game_id');
	var game_id = 'ea7006092f7b2010732c4ae72799b67f';	
	
	data.team_one_players = getTeamPlayers('team_one_players'); 
	data.team_two_players = getTeamPlayers('team_two_players'); 	
	
	function getTeamPlayers(team) {
		var players = [];
		var team_length = 0;
		
		var grGame = new GlideRecord('x_159204_feudnow_game');
		grGame.get(game_id);	
		
		// loop through game players
		for (var player in grGame[team]) { 
			var grUser = new GlideRecord('sys_user');
			grUser.get(grGame[team][player]);
			
			var o = {};
			o.name = grUser.name.toString();
			
			if (grUser.photo)
				o.pic = '/' + grUser.photo.toString() + '.iix';	
			else
				o.pic = 'https://joeschmoe.io/api/v1/random';
			
			players.push(o);
		}
	
		return players;
	}	

})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>rpoore_admin</sys_created_by>
        <sys_created_on>2021-05-19 01:02:36</sys_created_on>
        <sys_id>c36197442f103010732c4ae72799b6dd</sys_id>
        <sys_mod_count>45</sys_mod_count>
        <sys_name>fn-playerlist</sys_name>
        <sys_package display_value="FeudNow" source="x_159204_feudnow">2c62a3062f672010732c4ae72799b6ac</sys_package>
        <sys_policy/>
        <sys_scope display_value="FeudNow">2c62a3062f672010732c4ae72799b6ac</sys_scope>
        <sys_update_name>sp_widget_c36197442f103010732c4ae72799b6dd</sys_update_name>
        <sys_updated_by>rpoore_admin</sys_updated_by>
        <sys_updated_on>2021-05-20 05:01:30</sys_updated_on>
        <template><![CDATA[<div class="players">  
   Players
    <!-- player list -->
    <div class="grid-item" ng-repeat="users in c.team_players" >
      <img src="{{users.pic}}" width="48px" title="{{users.name}}"/>
    </div>  
</div>

<!--
<div id="demo">
  <p id="image"> </p>
</div>
-->]]></template>
    </sp_widget>
</record_update>
